<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
</head>
<body>

    <!-- ===== Fragmento de estilos (se incluye en cada página) ===== -->
    <div th:fragment="EncabezadoSty">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>HollowNet</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Segoe+UI&display=swap" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/css/header.css}">
        <link rel="stylesheet" th:href="@{/css/hero.css}">
        <link rel="stylesheet" th:href="@{/css/slider.css}">
    </div>

    <!-- ===== Fragmento de Header unificado ===== -->
    <header th:fragment="Encabezado">
        <div class="container-fluid d-flex justify-content-between align-items-center py-2 px-4">
            <div class="header-left d-flex align-items-center">
                <a th:href="@{/}" class="d-flex align-items-center text-decoration-none">
                    <img th:src="@{/images/HollowWhiteFondo.png}" alt="Logo" class="logo me-2" style="height:32px"/>
                    <h1 class="site-title h5 mb-0 text-white">HollowNet</h1>
                </a>
            </div>

            <nav class="nav-principal d-flex align-items-center">
                <!-- Menú principal -->
                <div class="menu-left d-flex">
                    <a th:href="@{/}" class="nav-link">Inicio</a>
                    <a th:href="@{/noticias}" class="nav-link">Noticias</a>
                    <a th:href="@{/Tienda}" class="nav-link">Tienda</a>
                    <a th:href="@{/Contacto}" class="nav-link">Contacto</a>
                </div>

                <!-- Menú derecho -->
                <div class="menu-right d-flex ms-4 align-items-center gap-2">
                    <!-- Carrito con badge -->
                    <a th:href="@{/Carrito}" class="custom-btn position-relative">
                        <i class="bi bi-cart"></i>
                        <span th:if="${cartCount != null and cartCount > 0}"
                              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                              th:text="${cartCount}">0</span>
                    </a>

                    <!-- Botón Admin solo para ROLE_ADMIN -->
                    <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin}" class="custom-btn">Administrar</a>

                    <!-- Si NO está autenticado -->
                    <div sec:authorize="isAnonymous()" class="d-flex gap-2">
                        <a th:href="@{/Registro}" class="custom-btn">Registro</a>
                        <a th:href="@{/Login}" class="custom-btn">Login</a>
                    </div>

                    <!-- Si está autenticado -->
                    <div sec:authorize="isAuthenticated()" class="d-flex align-items-center gap-3">
                        <span class="text-white fw-semibold">Hola, <span sec:authentication="name"></span></span>
                        <form th:action="@{/logout}" method="post" class="d-inline">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                            <button type="submit" class="custom-btn btn btn-outline-light">Salir</button>
                        </form>
                    </div>
                </div>
            </nav>
        </div>
    </header>

</body>
</html>
